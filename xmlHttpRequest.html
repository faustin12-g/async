<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1>Check the http request</h1>
    <script>

        async function fetchWithAbort()
        {
            const controller = new AbortController();
            const signal = controller.signal;

            setTimeout(()=>{
                console.log('Aborting the fetch request...')
                controller.abort();
            }, 1000);

            try{
                const response = await fetch('https://jsonplaceholder.typicode.com/photos', {
                    signal: controller.signal
                })
                if(!response.ok)
                {
                    throw new Error('OOPS!! Something went wrong while fetching data')
                }
                const data = await response.json();
                console.log('Fetched Data: ', data)
            }
            catch(error)
            {
                if(error.name === 'AbortError')
            {
                console.log('Fetch request was aborted')
            }
            else{
                console.log('Error: ', error.message)
            }
            }
        }

        fetchWithAbort();


        // async function createPhoto(photo)
        // {
        //     try{
        //         const response = await fetch('https://jsonplaceholder.typicode.com/photos',
        //             {
        //                 method: 'POST',
        //                 headers:{
        //                     'Content-Type': 'application/json'
        //                 },
        //                 body: JSON.stringify({
        //                     albumId: 1,
        //                     title: 'Faustin learing a fetch',
        //                     url: 'https://via.placeholder.com/600/92c952',
        //                     thumbnailUrl: 'https://via.placeholder.com/150/92c952'
        //                 })
        //             }
        //         )
        //         if(!response.ok)
        //         {
        //             throw new Error('OOPS!! Something went wrong while creating a request')
        //         }
        //         const data = await response.json();
        //         console.log('Created Photo:', data)
        //     }
        //     catch(error)
        //     {
        //         console.log('Error:', error.message)
        //     }
        // }

        // createPhoto();


// async function getData(id){
//     try{
//         const response = await fetch(`https://jsonplaceholder.typicode.com/photos/${id}`)
//         if(!response.ok)
//     {
//         throw new Error('OPPS!! Something went wrong for real')
//     }
//     const data = await response.json();
//     console.log('Data:', data)
//     }
//     catch(error)
//     {
//         console.log('Error:', error.message)
//     }
// }

// getData(8);

        // fetch('https://jsonplaceholder.typicode.com/photos/1')
        // .then(response=>{
        //     console.log('Resonse object:', response)
        //     if(!response.ok)
        // {
        //     throw new Error('OOPS!! Somethng went wrong')
        // }
        //     return response.json()
        // })
        // .then(data=>{
        //     console.log('Data:', data)
        //     console.log('Title:', data.title)
        //     console.log('ID:', data.id)
        // })
        // .catch(error=>{
        //     console.log('Error: ', error.message)
        // })
        // const xhr = new XMLHttpRequest();
        // xhr.onload = () =>{
        //     console.log('Response: ', xhr.response)
        // }

        // xhr.onerror = ()=>{
        //     console.log("Request error...")
        // }

        // xhr.open('POST', 'https://jsonplaceholder.typicode.com/posts')

        // xhr.setRequestHeader('Content-Type', 'application/json')

        // const newPhoto = {
        //     albumId: 1,
        //     title: 'Faustin is a programmer',
        //     url: 'https://via.placeholder.com/600/92c952',
        //     thumbnailUrl: 'https://via.placeholder.com/150/92c952'
        // }

        // xhr.send(JSON.stringify(newPhoto))




        // const xhr = new XMLHttpRequest();
        
        // xhr.onload = () =>{
        //     if(xhr.status === 200)
        // {
        //     console.log('Total photos: ', xhr.response.length, ' photos fetched.');
        //     xhr.response.forEach(photo => {
        //         console.log('- album: ', photo.albumId, 'title: ', photo.title)
                
        //     });
        // }
        // }


        // xhr.onerror = ()=>{
        //     console.log("Request error...")
        // }

        // const url = new URL('https://jsonplaceholder.typicode.com/photos');
        // url.searchParams.set('albumId', 1);
        // url.searchParams.set('_limit', 300);

        // xhr.open('get', url);
        // xhr.responseType = 'json';
        // xhr.send();





        // const xhr = new XMLHttpRequest();
        // console.log(xhr);
        // console.log(typeof xhr);
        // console.log(xhr.readyState);
        // xhr.onreadystatechange = ()=>{
        //     console.log(xhr.readyState)
        // }
        // xhr.responseType = 'json';


        // xhr.onload = ()=>{
        //     console.log(xhr.readyState)
        //     console.log(xhr.status)
        //     console.log(xhr.statusText)
        //     if(xhr.status === 200)
        // {
        //     console.log('Total response: ', xhr.response.length)
        //     console.log('400TH Photo: ', xhr.response[400].title)
        // }
        // else{
        //     console.log("Error occurred")
        // }
            
        // }

        // xhr.onerror = ()=>{
        //     console.log("Request error...")
        // }
        // xhr.onprogress = (event)=>{
        //     if(event.lengthComputable)
        // {
        //     const percentComplete = (event.loaded / event.total) * 100;
        //     console.log(`Progress: ${percentComplete}%`);

        // }
        // else{
        //     console.log(`Received ${event.loaded} bytes`);
        // }
        // }

        // xhr.ontimeout = ()=>{
        //     console.log('Request timed out')
        // }

    


        // xhr.open('GET', 'https://jsonplaceholder.typicode.com/photos')
        // console.log(xhr.readyState)
        // xhr.timeout = 5009

        // xhr.send();
        // console.log(xhr.readyState)

    </script>
</body>
</html>